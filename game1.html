<!doctype html>
<html>
<!--_Logic:
        1.  player clicks "New Game"
        2.  function randomly selects word from array
        3.  Grid is generated IAW the word selected
        4.  All input fields and counter are cleared
        5.  Alert prompts player to click ok when ready
        6.  player presses a key (A-Z)
        7.  Event is analyzed
            7a. if key equals one of the letters in the word the event result is sent to appropriate field
            7b. if key does not equal one the letters it is saved to failed field and a message is displayed
        8.  If player selects a correct letter a conditional function hides the masks covering the image
Works Cited: https://vdelariva.github.io/Word-Guess-Game/
-->

<head>
<meta charset="utf-8">
<title>JavaScript Assignment | Guess Game</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link href="assets/css/style.css" rel="stylesheet" type="text/css">
<link href="assets/css/north-america.css" rel="stylesheet" type="text/css">
</head>

<body>
    <nav class="navbar navbar-dark">
        <span class="navbar">GeoGuess Game</span>
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <span class="badge badge-primary">Total Wins</span>
                <div id="totalWins"></div>
            </li>
            <li class="nav-item active">
                <span class="badge badge-primary">Current Word</span>
                <span id="currentWord"></span>
            </li>
            <li class="nav-item active">
                <span class="badge badge-primary">Guesses</span>
                <span id="guessedLetters"></span>
            </li>
            <li class="nav-item active">
                <span class="badge badge-primary">Guesses Remaining</span>
                <span id="remainingGuesses"></span>
            </li>
            
            <li class="nav-item active">
                <span class="badge badge-primary">Word Length</span>
                <span id="wordLength"></span>
            </li>
        </ul>
    </nav>
    <hr>
    
    <div id="ttlWins" class="container">
        <div class="row">
            <div class="col-sm">
                
            </div>
        </div>        
    </div>
    <div class="container container1">
        <div class="row">
            <div class="col">
                <img src="assets/images/1x/north-america.png" class="img-fluid" id="back-image" alt="revealed-image">
                <img src="assets/images/1x/mask1.png" class="mask1" alt="mask">
                <img src="assets/images/1x/mask2.png" class="mask2" alt="mask">
                <img src="assets/images/1x/mask3.png" class="mask3" alt="mask">
                <img src="assets/images/1x/mask4.png" class="mask4" alt="mask">
                <img src="assets/images/1x/mask5.png" class="mask5" alt="mask">
                <img src="assets/images/1x/mask6.png" class="mask6" alt="mask">
                <img src="assets/images/1x/mask7.png" class="mask7" alt="mask">
                <img src="assets/images/1x/mask8.png" class="mask8" alt="mask">
                <img src="assets/images/1x/mask9.png" class="mask9" alt="mask">
                <img src="assets/images/1x/mask10.png" class="mask10" alt="mask">
                <img src="assets/images/1x/mask11.png" class="mask11" alt="mask">
                <img src="assets/images/1x/mask12.png" class="mask12" alt="mask">
            </div>
        </div>
    </div>
    <hr>
    
    <div class="container container2">
        <div class="row">
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask1', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask2', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask3', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask4', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask5', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask6', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask7', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask8', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask9', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask10', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask11', 'none')">Click</button>
            </div>
            
            <div class="col col-1">
                <button class="btn-primary" onClick="toggle('mask12', 'none')">Click</button>
            </div>
        </div>
    </div>
    
    <script>
        
        //******variables******
            //pauseGame:  boolean
            //guessedLetters:  array
            //guessingWord:  array
            //wordToMatch:  string
            //numGuess:  number  
            //wins: number
            //foundLetter: 
            //correctSound
            //incorrectSound
            //elements
            //attributes
        
        /******Pseudo Code******
        application selects 
        
        */
        
        
        
        
        // array of possible words
	var possibleWords = ['North America', 'South America', 'Asia', 'Australia', 'Europe', 'Africa']
	const maxGuess = 10
		var pauseGame = false
		var guessedLetters = []
		var guessingWord = []
		var wordToMatch
		var numGuess
		var wins = 0
		resetGame()
		
		// Wait for key press
		document.onkeypress = function (event) {
		
			// Make sure key pressed is an alpha character
		if (isAlpha(event.key) && !pauseGame) {
			checkForLetter(event.key.toUpperCase())
		}
	}
	// Game Functions
	
	// Check if letter is in word & process
	function checkForLetter(letter) {
		var foundLetter = false
            
			var correctSound = document.createElement('audio')
			var incorrectSound = document.createElement('audio')
			correctSound.setAttribute('src', 'assets/sounds/not-bad.mp3')
			incorrectSound.setAttribute('src', 'assets/sounds/gets-in-the-way.mp3')
            
			// Search string for letter
			for (var i = 0, j = wordToMatch.length; i < j; i++) {
				if (letter === wordToMatch[i]) {
					guessingWord[i] = letter
						foundLetter = true
						correctSound.play()
						// If guessing word matches random word
						if (guessingWord.join('') === wordToMatch) {
							// Increment # of wins
							wins++
							pauseGame = true
								updateDisplay()
								setTimeout(resetGame, 5000)
						}
				}
			}
			if (!foundLetter) {
				incorrectSound.play()
				// Check if inccorrect guess is already on the list
				if (!guessedLetters.includes(letter)) {
					// Add incorrect letter to guessed letter list
					guessedLetters.push(letter)
					// Decrement the number of remaining guesses
					numGuess--
				}
				if (numGuess === 0) {
					// Display word before reseting game
					guessingWord = wordToMatch.split()
						pauseGame = true
						setTimeout(resetGame, 5000)
				}
			}
			updateDisplay()
	}
    
	// Check in keypressed is between A-Z or a-z
	function isAlpha(ch) {
		return /^[A-Z]$/i.test(ch)
	}
        
	function resetGame() {
		numGuess = maxGuess
			pauseGame = false

			// Get a new word
			wordToMatch = possibleWords[Math.floor(Math.random() * possibleWords.length)].toUpperCase()
			console.log(wordToMatch)
			
			// Reset word arrays
			guessedLetters = []
			guessingWord = []
			
			// Reset the guessed word
			for (var i = 0, j = wordToMatch.length; i < j; i++) {
				
				// Put a space instead of an underscore between multi word "words"
				if (wordToMatch[i] === ' ') {
					guessingWord.push(' ')
				}
                else {
					guessingWord.push('_')
				}
			}
			// Update the Display
			updateDisplay()
	}
        
	function updateDisplay() {
		document.getElementById('totalWins').innerText = wins
        document.getElementById('currentWord').innerText = guessingWord.join('')
        document.getElementById('remainingGuesses').innerText = numGuess
        document.getElementById('guessedLetters').innerText = guessedLetters.join(' ')
        document.getElementById('wordLength').innerText = currentWord.length
	}
            // document.getElementById("l1").innerHTML = "Value of l1";
            // toggle() function sets the display for image mask blocks
	       // toggle('mask1', 'block'); // Shows
	       // toggle('mask1', 'none'); // hides
	function toggle(className, displayState) {
		var elements = document.getElementsByClassName(className);
			for (var i = 0; i < elements.length; i++) {
				elements[i].style.display = displayState
			}
	}
    </script>
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> 
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</body>
</html>
